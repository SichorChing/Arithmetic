!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.arithmetic=e():t.arithmetic=e()}(window,function(){return function(t){var e={};function r(s){if(e[s])return e[s].exports;var i=e[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(s,i,function(e){return t[e]}.bind(null,i));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);class s{constructor(){this.stack=[]}getLength(){return this.stack.length}peek(){const t=this.getLength();return t?this.stack[t-1]:void 0}pop(){return this.stack.pop()}push(t){this.stack.push(t)}reset(){this.stack=[]}}r.d(e,"default",function(){return i});class i{constructor(){this.operand=new s,this.operator=new s,this.tempNum="",this.tempSym=""}matchInBrackets(t){const e=/\([\+|\-|\*|\/|\.|\d]+?\)/g;let r=t.match(e);return r&&r.forEach(e=>{const r=this.calculate(e.replace(/[\(|\)]/g,""));t=t.replace(e,r)}),(r=t.match(e))?this.matchInBrackets(t):t}calculate(t){for(let e=(t=this.matchInBrackets(t)).length-1;0<=e;e--){const r=/[\d|\.]/;let s=t[e];if(r.test(s)){if(this.tempNum=s+this.tempNum,0==e){this.tempSym&&(this.calculateMultiOrDivis(this.tempSym),this.tempSym=""),this.tempNum&&this.operand.push(this.tempNum);break}}else{if(0==e){this.tempSym&&(this.calculateMultiOrDivis(this.tempSym),this.tempSym=""),this.tempNum&&this.operand.push(this.tempNum),this.operator.push(s);break}this.tempSym&&(this.calculateMultiOrDivis(this.tempSym),this.tempSym="");let r=this.operator.peek();const o=t[e-1],a=/[\+|\-|\*|\/]/;if(r)switch(this.tempNum&&(a.test(o)&&"-"==s?(this.operand.push(s+this.tempNum),s=""):this.operand.push(this.tempNum),this.tempNum=""),i.priorityCompare(r,s)){case 2:this.tempSym=this.operator.pop();break;case 1:this.calculateMultiOrDivis(this.operator.pop())}else!r&&this.tempNum&&(a.test(o)&&"-"==s?(this.operand.push(s+this.tempNum),s=""):this.operand.push(this.tempNum),this.tempNum="");s&&this.operator.push(s)}}return this.calculateReversePoland()}calculateReversePoland(){let t=0;for(;0<this.operand.getLength();){if(this.operator.getLength()==this.operand.getLength()){const e=t,r=this.operand.pop();t="+"==this.operator.pop()?i.addition(e,r):i.subtraction(e,r)}else{if(1==this.operand.getLength()){t=parseFloat(this.operand.pop());break}const e=this.operand.pop(),r=this.operand.pop(),s=this.operator.pop();t=this.selectCalculationRule(e,r,s)}this.operand.push(t)}return this.operand.reset(),this.operator.reset(),this.tempNum="",this.tempSym="",t}calculateMultiOrDivis(t){const e=this.operand.pop(),r=this.operand.pop();this.operand.push(this.selectCalculationRule(e,r,t))}selectCalculationRule(t,e,r){switch(r){case"*":return i.multiplication(t,e);case"/":return i.division(t,e);case"+":return i.addition(t,e);default:return i.subtraction(t,e)}}static addition(...t){return parseFloat(t[0])+parseFloat(t[1])}static division(...t){return parseFloat(t[0])/parseFloat(t[1])}static multiplication(...t){return parseFloat(t[0])*parseFloat(t[1])}static subtraction(...t){return parseFloat(t[0])-parseFloat(t[1])}static priorityCompare(t,e){const r=/[\*\/]/;return r.test(t)&&!r.test(e)?2:r.test(t)&&r.test(e)?1:0}}}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hcml0aG1ldGljL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9hcml0aG1ldGljL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2FyaXRobWV0aWMvLi9zcmMvc2NyaXB0L3N0YWNrLmpzIiwid2VicGFjazovL2FyaXRobWV0aWMvLi9zcmMvc2NyaXB0L2FyaXRobWV0aWMuanMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwid2luZG93IiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIlN0YWNrIiwiW29iamVjdCBPYmplY3RdIiwidGhpcyIsInN0YWNrIiwibGVuZ3RoIiwibGVuIiwiZ2V0TGVuZ3RoIiwidW5kZWZpbmVkIiwicG9wIiwibnVtIiwicHVzaCIsIl9fd2VicGFja19leHBvcnRzX18iLCJhcml0aG1ldGljX0FyaXRobWV0aWMiLCJvcGVyYW5kIiwib3BlcmF0b3IiLCJ0ZW1wTnVtIiwidGVtcFN5bSIsImV4cHJlc3Npb24iLCJyZWdJbkJyYWNrZXRzIiwiZXhwSW5CcmFja2V0cyIsIm1hdGNoIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJ0ZW1wUmVzdWFsdCIsImNhbGN1bGF0ZSIsInJlcGxhY2UiLCJtYXRjaEluQnJhY2tldHMiLCJudW1SZWciLCJjaGFyIiwidGVzdCIsImNhbGN1bGF0ZU11bHRpT3JEaXZpcyIsInBlZWtTeW0iLCJwZWVrIiwibmV4dENoYXIiLCJpc1N5bWJvbCIsInByaW9yaXR5Q29tcGFyZSIsImNhbGN1bGF0ZVJldmVyc2VQb2xhbmQiLCJyZXN1YWx0Iiwic3ltTCIsInN5bVIiLCJhZGRpdGlvbiIsInN1YnRyYWN0aW9uIiwicGFyc2VGbG9hdCIsImNhY2hlU3ltIiwic2VsZWN0Q2FsY3VsYXRpb25SdWxlIiwicmVzZXQiLCJzeW0iLCJtdWx0aXBsaWNhdGlvbiIsImRpdmlzaW9uIiwic3ltQSIsInN5bUIiLCJoaWdoIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLGlCQUFBQyxTQUFBLGlCQUFBQyxPQUNBQSxPQUFBRCxRQUFBRCxJQUNBLG1CQUFBRyxlQUFBQyxJQUNBRCxPQUFBLEdBQUFILEdBQ0EsaUJBQUFDLFFBQ0FBLFFBQUEsV0FBQUQsSUFFQUQsRUFBQSxXQUFBQyxJQVJBLENBU0NLLE9BQUEsV0FDRCxtQkNUQSxJQUFBQyxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFQLFFBR0EsSUFBQUMsRUFBQUksRUFBQUUsR0FBQSxDQUNBQyxFQUFBRCxFQUNBRSxHQUFBLEVBQ0FULFFBQUEsSUFVQSxPQU5BVSxFQUFBSCxHQUFBSSxLQUFBVixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBTSxHQUdBTCxFQUFBUSxHQUFBLEVBR0FSLEVBQUFELFFBMERBLE9BckRBTSxFQUFBTSxFQUFBRixFQUdBSixFQUFBTyxFQUFBUixFQUdBQyxFQUFBUSxFQUFBLFNBQUFkLEVBQUFlLEVBQUFDLEdBQ0FWLEVBQUFXLEVBQUFqQixFQUFBZSxJQUNBRyxPQUFBQyxlQUFBbkIsRUFBQWUsRUFBQSxDQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1YsRUFBQWdCLEVBQUEsU0FBQXRCLEdBQ0Esb0JBQUF1QixlQUFBQyxhQUNBTixPQUFBQyxlQUFB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LEVBQUFJLEdBRUF6QyxLQUFBVyxRQUFBSCxLQUFBMkIsR0FNQSxPQUpBbkMsS0FBQVcsUUFBQWdDLFFBQ0EzQyxLQUFBWSxTQUFBK0IsUUFDQTNDLEtBQUFhLFFBQUEsR0FDQWIsS0FBQWMsUUFBQSxHQUNBcUIsRUFNQXBDLHNCQUFBNkMsR0FDQSxNQUFBUixFQUFBcEMsS0FBQVcsUUFBQUwsTUFDQStCLEVBQUFyQyxLQUFBVyxRQUFBTCxNQUNBTixLQUFBVyxRQUFBSCxLQUFBUixLQUFBMEMsc0JBQUFOLEVBQUFDLEVBQUFPLElBU0E3QyxzQkFBQXFDLEVBQUFDLEVBQUFPLEdBQ0EsT0FBQUEsR0FDQSxRQUNBLE9BQXVCbEMsRUFBVW1DLGVBQUFULEVBQUFDLEdBQ2pDLFFBQ0EsT0FBdUIzQixFQUFVb0MsU0FBQVYsRUFBQUMsR0FDakMsUUFDQSxPQUF1QjNCLEVBQVU0QixTQUFBRixFQUFBQyxHQUNqQyxRQUNBLE9BQXVCM0IsRUFBVTZCLFlBQUFILEVBQUFDLElBT2pDdEMsbUJBQUFRLEdBR0EsT0FGQWlDLFdBQUFqQyxFQUFBLElBQ0FpQyxXQUFBakMsRUFBQSxJQU9BUixtQkFBQVEsR0FHQSxPQUZBaUMsV0FBQWpDLEVBQUEsSUFDQWlDLFdBQUFqQyxFQUFBLElBT0FSLHlCQUFBUSxHQUdBLE9BRkFpQyxXQUFBakMsRUFBQSxJQUNBaUMsV0FBQWpDLEVBQUEsSUFPQVIsc0JBQUFRLEdBR0EsT0FGQWlDLFdBQUFqQyxFQUFBLElBQ0FpQyxXQUFBakMsRUFBQSxJQU9BUix1QkFBQWdELEVBQUFDLEdBQ0EsTUFBQUMsRUFBQSxTQUNBLE9BQUFBLEVBQUF0QixLQUFBb0IsS0FBQUUsRUFBQXRCLEtBQUFxQixHQUNBLEVBQ1NDLEVBQUF0QixLQUFBb0IsSUFBQUUsRUFBQXRCLEtBQUFxQixHQUNULEVBRUEiLCJmaWxlIjoiLi9zY3JpcHQvYXJpdGhtZXRpYy5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJhcml0aG1ldGljXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImFyaXRobWV0aWNcIl0gPSBmYWN0b3J5KCk7XG59KSh3aW5kb3csIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0YWNrIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuc3RhY2sgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRMZW5ndGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhY2subGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIHBlZWsoKSB7XHJcbiAgICAgICAgY29uc3QgbGVuID0gdGhpcy5nZXRMZW5ndGgoKTtcclxuICAgICAgICByZXR1cm4gbGVuID8gdGhpcy5zdGFja1tsZW4gLSAxXSA6IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBwb3AoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhY2sucG9wKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVzaChudW0pIHtcclxuICAgICAgICB0aGlzLnN0YWNrLnB1c2gobnVtKTtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0KCkge1xyXG4gICAgICAgIHRoaXMuc3RhY2sgPSBbXTtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59OyIsImltcG9ydCBTdGFjayBmcm9tICcuL3N0YWNrJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFyaXRobWV0aWMge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5vcGVyYW5kID0gbmV3IFN0YWNrKCk7XHJcbiAgICAgICAgdGhpcy5vcGVyYXRvciA9IG5ldyBTdGFjaygpO1xyXG4gICAgICAgIHRoaXMudGVtcE51bSA9ICcnO1xyXG4gICAgICAgIHRoaXMudGVtcFN5bSA9ICcnO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzY3JpcHRpb24g6YCS5b2S6KGo6L6+5byP77yM5LyY5YWI6K6h566X5ous5Y+35Lit55qE5YaF5a655bm26L+b6KGM5pu/5o2iXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ31cclxuICAgICAqL1xyXG4gICAgbWF0Y2hJbkJyYWNrZXRzKGV4cHJlc3Npb24pIHtcclxuICAgICAgICBjb25zdCByZWdJbkJyYWNrZXRzID0gL1xcKFtcXCt8XFwtfFxcKnxcXC98XFwufFxcZF0rP1xcKS9nO1xyXG4gICAgICAgIGxldCBleHBJbkJyYWNrZXRzID0gZXhwcmVzc2lvbi5tYXRjaChyZWdJbkJyYWNrZXRzKTtcclxuICAgICAgICBpZiAoZXhwSW5CcmFja2V0cykge1xyXG4gICAgICAgICAgICBleHBJbkJyYWNrZXRzLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZW1wUmVzdWFsdCA9IHRoaXMuY2FsY3VsYXRlKGVsZW1lbnQucmVwbGFjZSgvW1xcKHxcXCldL2csICcnKSk7XHJcbiAgICAgICAgICAgICAgICBleHByZXNzaW9uID0gZXhwcmVzc2lvbi5yZXBsYWNlKGVsZW1lbnQsIHRlbXBSZXN1YWx0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGV4cEluQnJhY2tldHMgPSBleHByZXNzaW9uLm1hdGNoKHJlZ0luQnJhY2tldHMpO1xyXG4gICAgICAgIHJldHVybiBleHBJbkJyYWNrZXRzID8gdGhpcy5tYXRjaEluQnJhY2tldHMoZXhwcmVzc2lvbikgOiBleHByZXNzaW9uO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzY3JpcHRpb24g5Yid5q2l5aSE55CG6K6h566X6KGo6L6+5byP77yM5bCG5LyY5YWI57qn6auY55qE5LmY6Zmk6L+Q566X5ZKM5ous5Y+35YaF55qE6L+Q566X5YWI6K6h566X5Ye657uT5p6cXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ31cclxuICAgICAqL1xyXG4gICAgY2FsY3VsYXRlKGV4cHJlc3Npb24pIHtcclxuICAgICAgICAvLyDlhYjliKTmlq3ooajovr7lvI/kuK3mmK/lkKblrZjlnKjmi6zlj7fov5DnrpfvvIzlpoLmnpzmnInliJnpgJLlvZLorqHnrpflh7rlhbbkuK3nmoTlgLzlubbmm7/mjaLooajovr7lvI/kuK3nmoTmi6zlj7dcclxuICAgICAgICBleHByZXNzaW9uID0gdGhpcy5tYXRjaEluQnJhY2tldHMoZXhwcmVzc2lvbik7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IGV4cHJlc3Npb24ubGVuZ3RoIC0gMTsgMCA8PSBpOyBpLS0pIHtcclxuICAgICAgICAgICAgY29uc3QgbnVtUmVnID0gL1tcXGR8XFwuXS87XHJcbiAgICAgICAgICAgIGxldCBjaGFyID0gZXhwcmVzc2lvbltpXTtcclxuICAgICAgICAgICAgaWYgKG51bVJlZy50ZXN0KGNoYXIpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBOdW0gPSBjaGFyICsgdGhpcy50ZW1wTnVtO1xyXG4gICAgICAgICAgICAgICAgaWYgKDAgPT0gaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRlbXBTeW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVNdWx0aU9yRGl2aXModGhpcy50ZW1wU3ltKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wU3ltID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRlbXBOdW0pIHRoaXMub3BlcmFuZC5wdXNoKHRoaXMudGVtcE51bSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoMCA9PSBpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGVtcFN5bSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU11bHRpT3JEaXZpcyh0aGlzLnRlbXBTeW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBTeW0gPSAnJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGVtcE51bSkgdGhpcy5vcGVyYW5kLnB1c2godGhpcy50ZW1wTnVtKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhdG9yLnB1c2goY2hhcik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50ZW1wU3ltKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVNdWx0aU9yRGl2aXModGhpcy50ZW1wU3ltKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBTeW0gPSAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxldCBwZWVrU3ltID0gdGhpcy5vcGVyYXRvci5wZWVrKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0Q2hhciA9IGV4cHJlc3Npb25baSAtIDFdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNTeW1ib2wgPSAvW1xcK3xcXC18XFwqfFxcL10vO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBlZWtTeW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50ZW1wTnVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1N5bWJvbC50ZXN0KG5leHRDaGFyKSAmJiAnLScgPT0gY2hhcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVyYW5kLnB1c2goY2hhciArIHRoaXMudGVtcE51bSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFyID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZXJhbmQucHVzaCh0aGlzLnRlbXBOdW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcE51bSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKEFyaXRobWV0aWMucHJpb3JpdHlDb21wYXJlKHBlZWtTeW0sIGNoYXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcFN5bSA9IHRoaXMub3BlcmF0b3IucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVNdWx0aU9yRGl2aXModGhpcy5vcGVyYXRvci5wb3AoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIXBlZWtTeW0gJiYgdGhpcy50ZW1wTnVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzU3ltYm9sLnRlc3QobmV4dENoYXIpICYmICctJyA9PSBjaGFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3BlcmFuZC5wdXNoKGNoYXIgKyB0aGlzLnRlbXBOdW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFyID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVyYW5kLnB1c2godGhpcy50ZW1wTnVtKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wTnVtID0gJyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hhcikgdGhpcy5vcGVyYXRvci5wdXNoKGNoYXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmNhbGN1bGF0ZVJldmVyc2VQb2xhbmQoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQGRlc2NyaXB0aW9uIOiuoeeul+acgOe7iOeahOmAhuazouWFsOihqOi+vuW8j1xyXG4gICAgICovXHJcbiAgICBjYWxjdWxhdGVSZXZlcnNlUG9sYW5kKCkge1xyXG4gICAgICAgIGxldCByZXN1YWx0ID0gMDtcclxuICAgICAgICB3aGlsZSAoMCA8IHRoaXMub3BlcmFuZC5nZXRMZW5ndGgoKSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcGVyYXRvci5nZXRMZW5ndGgoKSA9PSB0aGlzLm9wZXJhbmQuZ2V0TGVuZ3RoKCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN5bUwgPSByZXN1YWx0O1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3ltUiA9IHRoaXMub3BlcmFuZC5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlU3ltID0gdGhpcy5vcGVyYXRvci5wb3AoKTtcclxuICAgICAgICAgICAgICAgIHJlc3VhbHQgPSAnKycgPT0gY2FjaGVTeW0gPyBBcml0aG1ldGljLmFkZGl0aW9uKHN5bUwsIHN5bVIpIDogQXJpdGhtZXRpYy5zdWJ0cmFjdGlvbihzeW1MLFxyXG4gICAgICAgICAgICAgICAgICAgIHN5bVIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKDEgPT0gdGhpcy5vcGVyYW5kLmdldExlbmd0aCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWFsdCA9IHBhcnNlRmxvYXQodGhpcy5vcGVyYW5kLnBvcCgpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IHN5bUwgPSB0aGlzLm9wZXJhbmQucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzeW1SID0gdGhpcy5vcGVyYW5kLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2FjaGVTeW0gPSB0aGlzLm9wZXJhdG9yLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWFsdCA9IHRoaXMuc2VsZWN0Q2FsY3VsYXRpb25SdWxlKHN5bUwsIHN5bVIsIGNhY2hlU3ltKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm9wZXJhbmQucHVzaChyZXN1YWx0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vcGVyYW5kLnJlc2V0KCk7XHJcbiAgICAgICAgdGhpcy5vcGVyYXRvci5yZXNldCgpO1xyXG4gICAgICAgIHRoaXMudGVtcE51bSA9ICcnO1xyXG4gICAgICAgIHRoaXMudGVtcFN5bSA9ICcnO1xyXG4gICAgICAgIHJldHVybiByZXN1YWx0O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVzY3JpcHRpb24g5Y+q6K6h566X5LmY5rOV5oiW6ICF6Zmk5rOVXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc3ltXHJcbiAgICAgKi9cclxuICAgIGNhbGN1bGF0ZU11bHRpT3JEaXZpcyhzeW0pIHtcclxuICAgICAgICBjb25zdCBzeW1MID0gdGhpcy5vcGVyYW5kLnBvcCgpO1xyXG4gICAgICAgIGNvbnN0IHN5bVIgPSB0aGlzLm9wZXJhbmQucG9wKCk7XHJcbiAgICAgICAgdGhpcy5vcGVyYW5kLnB1c2godGhpcy5zZWxlY3RDYWxjdWxhdGlvblJ1bGUoc3ltTCwgc3ltUiwgc3ltKSk7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQGRlc2NyaXB0aW9uIOWIpOaWreS4pOS4quaVsOWtl+mXtOeahOi/kOeul+azleWImVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmcgfHwgTnVtYmVyfSBzeW1MXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZyB8fCBOdW1iZXJ9IHN5bVJcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzeW1cclxuICAgICAqL1xyXG4gICAgc2VsZWN0Q2FsY3VsYXRpb25SdWxlKHN5bUwsIHN5bVIsIHN5bSkge1xyXG4gICAgICAgIHN3aXRjaCAoc3ltKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJyonOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEFyaXRobWV0aWMubXVsdGlwbGljYXRpb24oc3ltTCwgc3ltUik7XHJcbiAgICAgICAgICAgIGNhc2UgJy8nOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEFyaXRobWV0aWMuZGl2aXNpb24oc3ltTCwgc3ltUik7XHJcbiAgICAgICAgICAgIGNhc2UgJysnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEFyaXRobWV0aWMuYWRkaXRpb24oc3ltTCwgc3ltUik7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQXJpdGhtZXRpYy5zdWJ0cmFjdGlvbihzeW1MLCBzeW1SKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbiDliqDms5VcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nIHx8IE51bWJlcn1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFkZGl0aW9uKC4uLm51bSkge1xyXG4gICAgICAgIGNvbnN0IHN5bUwgPSBwYXJzZUZsb2F0KG51bVswXSk7XHJcbiAgICAgICAgY29uc3Qgc3ltUiA9IHBhcnNlRmxvYXQobnVtWzFdKTtcclxuICAgICAgICByZXR1cm4gc3ltTCArIHN5bVI7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbiDpmaTms5VcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nIHx8IE51bWJlcn1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGRpdmlzaW9uKC4uLm51bSkge1xyXG4gICAgICAgIGNvbnN0IHN5bUwgPSBwYXJzZUZsb2F0KG51bVswXSk7XHJcbiAgICAgICAgY29uc3Qgc3ltUiA9IHBhcnNlRmxvYXQobnVtWzFdKTtcclxuICAgICAgICByZXR1cm4gc3ltTCAvIHN5bVI7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbiDkuZjms5VcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nIHx8IE51bWJlcn1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIG11bHRpcGxpY2F0aW9uKC4uLm51bSkge1xyXG4gICAgICAgIGNvbnN0IHN5bUwgPSBwYXJzZUZsb2F0KG51bVswXSk7XHJcbiAgICAgICAgY29uc3Qgc3ltUiA9IHBhcnNlRmxvYXQobnVtWzFdKTtcclxuICAgICAgICByZXR1cm4gc3ltTCAqIHN5bVI7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbiDlh4/ms5VcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nIHx8IE51bWJlcn1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIHN1YnRyYWN0aW9uKC4uLm51bSkge1xyXG4gICAgICAgIGNvbnN0IHN5bUwgPSBwYXJzZUZsb2F0KG51bVswXSk7XHJcbiAgICAgICAgY29uc3Qgc3ltUiA9IHBhcnNlRmxvYXQobnVtWzFdKTtcclxuICAgICAgICByZXR1cm4gc3ltTCAtIHN5bVI7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBkZXNjcmlwdGlvbiDliKTmlq3kuKTkuKrov5DnrpfnrKbnmoTkvJjlhYjnuqdcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgcHJpb3JpdHlDb21wYXJlKHN5bUEsIHN5bUIpIHtcclxuICAgICAgICBjb25zdCBoaWdoID0gL1tcXCpcXC9dLztcclxuICAgICAgICBpZiAoaGlnaC50ZXN0KHN5bUEpICYmICFoaWdoLnRlc3Qoc3ltQikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChoaWdoLnRlc3Qoc3ltQSkgJiYgaGlnaC50ZXN0KHN5bUIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTsiXSwic291cmNlUm9vdCI6IiJ9